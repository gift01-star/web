<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Chat with <%= otherUser.name %></title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
</head>
<body class="bg-gray-100 flex flex-col min-h-screen p-4">

  <header class="mb-6 flex items-center justify-between">
    <h1 class="text-2xl font-semibold">Chat with <%= otherUser.name %></h1>
    <a href="/chat/list" class="text-indigo-600 hover:underline">Back to Chat List</a>
  </header>

  <main class="flex-1 overflow-auto mb-4 bg-white p-4 rounded shadow max-w-3xl mx-auto">
    <% if (messages.length === 0) { %>
      <p>No messages yet. Say hello!</p>
    <% } %>

    <% messages.forEach(message => { %>
      <div class="mb-2 <%= message.sender.equals(user._id) ? 'text-right' : 'text-left' %>">
        <p class="<%= message.sender.equals(user._id) ? 'inline-block bg-indigo-500 text-white rounded px-3 py-1' : 'inline-block bg-gray-300 text-gray-800 rounded px-3 py-1' %>">
          <%= message.content %>
        </p>
      </div>
    <% }) %>
  </main>

  <form action="/chat/<%= otherUser._id %>" method="POST" class="max-w-3xl mx-auto flex gap-2">
    <input type="text" name="content" placeholder="Type your message" required class="flex-grow border rounded px-3 py-2" />
    <button type="submit" class="bg-indigo-600 text-white rounded px-4 py-2">Send</button>
  </form>

</body>
</html>